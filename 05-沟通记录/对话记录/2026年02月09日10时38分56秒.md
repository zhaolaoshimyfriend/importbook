# AI助手对话记录

## 对话信息
- **日期**: 2026年02月09日 10时38分56秒
- **主题**: 二级科目匹配问题 - 大模型解决方案
- **关键字**: 需求分析

## 对话内容

**Q: 这里在实际业务中很多二级科目比如150101长期债券投资，它们的层级和名称都不完全相同，请问这用传统的精确匹配方式效果不一定好，有没什么好办法呢？比如使用大模型**

**A:** 

你提出的问题非常关键！二级科目（如150101-债券投资）确实存在层级和名称不完全相同的问题，传统精确匹配效果有限。我为你设计了一套**基于大模型的二级科目匹配方案**。

### 问题分析

**二级科目匹配的难点**：
1. **层级结构不一致**：编码格式、层级分隔符、编码长度都可能不同
   - 本系统：150101-债券投资
   - 对方系统可能：1501.01-债券投资、150101-债券、1501-01-债权投资等

2. **名称不完全相同**：存在同义词、缩写、表述差异
   - 本系统：150101-债券投资
   - 对方系统可能：150101-债券、150101-债权投资、150101-长期债券等

3. **传统匹配方法的局限性**：
   - 字符串精确匹配：无法处理名称差异
   - 编辑距离算法：无法理解语义关系
   - 层级规则匹配：无法处理编码格式差异

### 大模型匹配方案

#### 核心思路
使用大模型的语义理解能力，结合科目上下文信息（父科目、类别、方向等），进行智能匹配。

#### 匹配流程
```
提取科目上下文 → 构建Prompt → 调用大模型API → 返回匹配结果
```

#### 关键设计
1. **Prompt设计**：包含本系统科目信息、对方系统候选科目、匹配要求
2. **上下文信息**：父科目、同级科目、科目属性、历史匹配数据
3. **结果处理**：最佳匹配（置信度）+ 候选列表 + 匹配依据

#### 技术实现
- **大模型选择**：GPT-4/GPT-3.5、Claude、国产大模型等
- **批量处理**：批量构建Prompt，提高效率
- **成本优化**：分层调用、缓存机制、批量处理

#### 预期效果
- **匹配准确率**：≥90%（相比传统方法的60-70%）
- **自动匹配率**：≥80%（高置信度自动匹配）
- **处理效率**：批量处理，100个科目/分钟

### 实施建议

**第一阶段（MVP验证）**：
- 选择10-20个典型二级科目测试
- 使用GPT-3.5进行匹配验证
- 评估准确率和成本

**第二阶段（批量处理）**：
- 实现批量匹配功能
- 建立缓存机制
- 优化成本控制

**第三阶段（优化完善）**：
- 引入人工反馈学习
- 优化Prompt策略
- 持续优化匹配效果

### 适用科目

**需要大模型匹配的科目**：
- 二级及多级科目（141个，67.1%）
- 如：150101-债券投资、150102-其他债权投资、160401-建筑工程等

详细方案已保存在：`02-需求分析/业务分析/基于大模型的二级科目匹配方案.md`

## 关键信息提取
- 二级科目匹配存在层级和名称不完全相同的问题
- 传统精确匹配效果有限（60-70%准确率）
- 大模型方案可以显著提高匹配准确率（≥90%）
- 需要结合上下文信息（父科目、类别等）进行匹配
- 通过分层调用和缓存机制控制成本

## 后续行动
- [x] 完成基于大模型的二级科目匹配方案设计
- [ ] 更新科目分类，将二级科目改为使用大模型匹配
- [ ] 设计Prompt模板和API调用方案
- [ ] 进行MVP验证测试

## 备注
详细技术方案请参考：`02-需求分析/业务分析/基于大模型的二级科目匹配方案.md`
